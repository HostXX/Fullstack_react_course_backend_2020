(this["webpackJsonpthe-phonebook"]=this["webpackJsonpthe-phonebook"]||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var o=t(0),a=t.n(o),r=t(14),c=t.n(r),i=t(4),u=t(2),l=function(e){var n=e.deletePerson,t=e.person,o=e.id,r=e.phone;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"person"},a.a.createElement("p",null,"Name: ")," ",t.toUpperCase()," ",a.a.createElement("p",null,"phone: "),r.toUpperCase(),a.a.createElement("button",{onClick:n(t,o)},"Delete")))},s=function(e){var n=e.persons,t=e.deletePerson;return n.map((function(e){return a.a.createElement(l,{key:e.id,id:e.id,person:e.name,phone:e.phone,deletePerson:t})}))},m=function(e){var n=e.message;return null===n?null:a.a.createElement("div",{className:"error"===(null===n||void 0===n?void 0:n.type)?"error-notification":"notification"},null===n||void 0===n?void 0:n.message)},f=function(e){return a.a.createElement("div",{className:"submit-form"},a.a.createElement("form",{onSubmit:e.onFormSummit},a.a.createElement("label",{htmlFor:"person_name"},"name:")," ",a.a.createElement("input",{id:"person_name",value:e.name,onChange:e.onNameChangue}),a.a.createElement("label",{htmlFor:"phone_num"},"phone:")," ",a.a.createElement("input",{id:"phone_num",value:e.phone,onChange:e.onPhonechangue}),a.a.createElement("button",{type:"submit"},"add")))},h=function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"search"},a.a.createElement("label",{htmlFor:"search-term"},"Search name:"),a.a.createElement("input",{id:"search-term",onChange:e.onSearch})))},p=t(3),d=t.n(p),g="/api/person",v=function(){return d.a.get(g).then((function(e){return e.data}))},b=function(e){return d.a.post(g,e).then((function(e){return e.data}))},E=function(e,n){return d.a.put("".concat(g,"/").concat(e),n).then((function(e){return e.data}))},y=function(e){return d.a.delete("".concat(g,"/").concat(e)).then((function(e){return e.data}))},O=function(){var e=Object(o.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],c=Object(o.useState)(""),l=Object(u.a)(c,2),p=l[0],d=l[1],g=Object(o.useState)(""),O=Object(u.a)(g,2),j=O[0],w=O[1],P=Object(o.useState)([]),S=Object(u.a)(P,2),C=S[0],N=S[1],k=Object(o.useState)(null),F=Object(u.a)(k,2),T=F[0],A=F[1];return Object(o.useEffect)((function(){v().then((function(e){console.log(e),r(e.reverse())}))}),[]),a.a.createElement("div",{className:"app-container"},a.a.createElement(m,{message:T}),a.a.createElement(h,{onSearch:function(e){var n=e.target.value.toLowerCase(),o=t.filter((function(e){return e.name.indexOf(n)>-1}));N([]),N(o)}}),a.a.createElement("h2",null,"Phonebook"),a.a.createElement(f,{name:p,phone:j,onFormSummit:function(e){if(e.preventDefault(),""===p||""===j)return console.log("Alert: Name or phone can't be empty"),setTimeout((function(){A(null)}),3e3),A({message:"Name or phone are missing",type:"error"});if("number"!==typeof j)return console.log("Alert: Phone is of invalid"),setTimeout((function(){A(null)}),3e3),A({message:"Phone is of invalid",type:"error"});if(j.length<10)return console.log("Alert: Phone is of invalid lenght"),setTimeout((function(){A(null)}),3e3),A({message:"Phone too short or invalid",type:"error"});var n={name:p.toLowerCase(),phone:j,id:Math.floor(101*Math.random())};if(t.filter((function(e){return e.name===n.name})).length>0){if(window.confirm("".concat(n.name," is already in the phonebook, do you want to update the phone?"))){var o=t.find((function(e){return e.name===p}));E(o.id,Object(i.a)(Object(i.a)({},o),{},{phone:j})).then((function(e){r(t.map((function(n){return n.name===p?e:n})))})).catch((function(e){console.log(e),A({message:"Error during update",type:"error"})})),r(t.concat(n)),A({message:"the phone of ".concat(n.name," has changed"),type:"notification"}),d(""),w(""),setTimeout((function(){A(null)}),3e3)}}else b(n).then((function(e){r(t.concat(e).reverse()),A({message:"Added ".concat(n.name),type:"notification"}),d(""),w("")})).catch((function(e){A("".concat(e)),console.log(e)})),setTimeout((function(){A(null)}),3e3)},onPhonechangue:function(e){var n=e.target.value;w(n),console.log(n)},onNameChangue:function(e){d(e.target.value),console.log(p)}}),a.a.createElement("h2",null,"List of persons with phones"),a.a.createElement(s,{persons:0===C.length?t:C,deletePerson:function(e,n){return function(){window.confirm("Do you want to delete ".concat(e," ?"))&&(y(n).then((function(){r(t.filter((function(e){return e.id!==n}))),A({message:"Deleted ".concat(e),type:"notification"})})).catch((function(o){console.log(o),r(t.filter((function(e){return e.id!==n}))),A({message:"The user ".concat(e," was deleted from the server already."),type:"error"})})),setTimeout((function(){A(null)}),3e3))}}}))};t(37);c.a.render(a.a.createElement(O,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.03b85bda.chunk.js.map