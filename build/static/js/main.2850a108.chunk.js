(this["webpackJsonpthe-phonebook"]=this["webpackJsonpthe-phonebook"]||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(14),c=t.n(r),u=t(4),i=t(2),l=function(e){var n=e.persons,t=e.deletePerson;return n.map((function(e){return o.a.createElement("div",{key:e.id,className:"person"},o.a.createElement("p",null,"Name: ")," ",e.name," ",o.a.createElement("p",null,"phone: "),e.phone,o.a.createElement("button",{onClick:t(e.name,e.id)},"Delete"))}))},s=function(e){var n=e.message;return null===n?null:o.a.createElement("div",{className:"error"===(null===n||void 0===n?void 0:n.type)?"error-notification":"notification"},null===n||void 0===n?void 0:n.message)},m=function(e){return o.a.createElement("div",{className:"submit-form"},o.a.createElement("form",{onSubmit:e.onFormSummit},o.a.createElement("label",{htmlFor:"person_name"},"name:")," ",o.a.createElement("input",{id:"person_name",value:e.name,onChange:e.onNameChangue}),o.a.createElement("label",{htmlFor:"phone_num"},"phone:")," ",o.a.createElement("input",{id:"phone_num",value:e.phone,onChange:e.onPhonechangue}),o.a.createElement("button",{type:"submit"},"add")))},f=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"search"},o.a.createElement("label",{htmlFor:"search-term"},"Search name:"),o.a.createElement("input",{id:"search-term",onChange:e.onSearch})))},h=t(3),p=t.n(h),d="/api/person",g=function(){return p.a.get(d).then((function(e){return e.data}))},b=function(e){return p.a.post(d,e).then((function(e){return e.data}))},v=function(e,n){return p.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},E=function(e){return p.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},y=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)(""),h=Object(i.a)(c,2),p=h[0],d=h[1],y=Object(a.useState)(""),O=Object(i.a)(y,2),j=O[0],w=O[1],S=Object(a.useState)([]),N=Object(i.a)(S,2),k=N[0],C=N[1],F=Object(a.useState)(null),P=Object(i.a)(F,2),T=P[0],D=P[1];return Object(a.useEffect)((function(){g().then((function(e){console.log(e),r(e.reverse())}))}),[]),o.a.createElement("div",{className:"app-container"},o.a.createElement(s,{message:T}),o.a.createElement(f,{onSearch:function(e){var n=e.target.value.toLowerCase(),a=t.filter((function(e){return e.name.indexOf(n)>-1}));C([]),C(a)}}),o.a.createElement("h2",null,"Phonebook"),o.a.createElement(m,{name:p,phone:j,onFormSummit:function(e){if(e.preventDefault(),""===p||""===j)return console.log("Alert: Name or phone can't be empty"),setTimeout((function(){D(null)}),3e3),D({message:"Name or phone are missing",type:"error"});var n={name:p.toLowerCase(),phone:j};if(t.filter((function(e){return e.name===n.name})).length>0){if(window.confirm("".concat(n.name," is already in the phonebook, do you want to update the phone?"))){var a=t.find((function(e){return e.name===p}));v(a.id,Object(u.a)(Object(u.a)({},a),{},{phone:j})).then((function(e){r(t.map((function(n){return n.name===p?e:n}))),D({message:"the phone of ".concat(n.name," has changed"),type:"notification"}),d(""),w("")})).catch((function(e){console.log(e.response.data.message),D({message:"".concat(e.response.data.message),type:"error"})})),setTimeout((function(){D(null)}),3e3)}}else b(n).then((function(e){r(t.concat(e).reverse()),D({message:"Added ".concat(n.name),type:"notification"}),d(""),w("")})).catch((function(e){D({message:"".concat(e.response.data.message),type:"error"})})),setTimeout((function(){D(null)}),3e3)},onPhonechangue:function(e){var n=e.target.value;w(n)},onNameChangue:function(e){d(e.target.value),console.log(p)}}),o.a.createElement("h2",null,"List of persons with phones"),o.a.createElement(l,{persons:0===k.length?t:k,deletePerson:function(e,n){return function(){window.confirm("Do you want to delete ".concat(e," ?"))&&(E(n).then((function(){r(t.filter((function(e){return e.id!==n}))),D({message:"Deleted ".concat(e),type:"notification"})})).catch((function(a){console.log(a),r(t.filter((function(e){return e.id!==n}))),D({message:"The user ".concat(e," was deleted from the server already."),type:"error"})})),setTimeout((function(){D(null)}),3e3))}}}))};t(37);c.a.render(o.a.createElement(y,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.2850a108.chunk.js.map