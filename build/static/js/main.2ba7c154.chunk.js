(this["webpackJsonpthe-phonebook"]=this["webpackJsonpthe-phonebook"]||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var o=t(0),a=t.n(o),r=t(14),c=t.n(r),u=t(4),l=t(2),i=function(e){var n=e.deletePerson,t=e.person,o=e.id,r=e.phone;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"person"},a.a.createElement("p",null,"Name: ")," ",t.toUpperCase()," ",a.a.createElement("p",null,"phone: "),r.toUpperCase(),a.a.createElement("button",{onClick:n(t,o)},"Delete")))},m=function(e){var n=e.persons,t=e.deletePerson;return n.map((function(e){return a.a.createElement(i,{key:e.id,id:e.id,person:e.name,phone:e.phone,deletePerson:t})}))},s=function(e){var n=e.message;return null===n?null:a.a.createElement("div",{className:"error"===(null===n||void 0===n?void 0:n.type)?"error-notification":"notification"},null===n||void 0===n?void 0:n.message)},h=function(e){return a.a.createElement("div",{className:"submit-form"},a.a.createElement("form",{onSubmit:e.onFormSummit},a.a.createElement("label",{htmlFor:"person_name"},"name:")," ",a.a.createElement("input",{id:"person_name",value:e.name,onChange:e.onNameChangue}),a.a.createElement("label",{htmlFor:"phone_num"},"phone:")," ",a.a.createElement("input",{id:"phone_num",value:e.phone,onChange:e.onPhonechangue}),a.a.createElement("button",{type:"submit"},"add")))},f=function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"search"},a.a.createElement("label",{htmlFor:"search-term"},"Search name:"),a.a.createElement("input",{id:"search-term",onChange:e.onSearch})))},p=t(3),d=t.n(p),g="/api/person",E=function(){return d.a.get(g).then((function(e){return e.data}))},b=function(e){return d.a.post(g,e).then((function(e){return e.data}))},v=function(e,n){return d.a.put("".concat(g,"/").concat(e),n).then((function(e){return e.data}))},y=function(e){return d.a.delete("".concat(g,"/").concat(e)).then((function(e){return e.data}))},O=function(){var e=Object(o.useState)([]),n=Object(l.a)(e,2),t=n[0],r=n[1],c=Object(o.useState)(""),i=Object(l.a)(c,2),p=i[0],d=i[1],g=Object(o.useState)(""),O=Object(l.a)(g,2),j=O[0],w=O[1],S=Object(o.useState)([]),C=Object(l.a)(S,2),N=C[0],P=C[1],k=Object(o.useState)(null),F=Object(l.a)(k,2),T=F[0],D=F[1];return Object(o.useEffect)((function(){E().then((function(e){console.log(e),r(e.reverse())}))}),[]),a.a.createElement("div",{className:"app-container"},a.a.createElement(s,{message:T}),a.a.createElement(f,{onSearch:function(e){var n=e.target.value.toLowerCase(),o=t.filter((function(e){return e.name.indexOf(n)>-1}));P([]),P(o)}}),a.a.createElement("h2",null,"Phonebook"),a.a.createElement(h,{name:p,phone:j,onFormSummit:function(e){if(e.preventDefault(),""===p||""===j)return console.log("Alert: Name or phone can't be empty"),setTimeout((function(){D(null)}),3e3),D({message:"Name or phone are missing",type:"error"});if(j.length<10)return console.log("Alert: Phone is of invalid lenght"),setTimeout((function(){D(null)}),3e3),D({message:"Phone too short",type:"error"});var n={name:p.toLowerCase(),phone:j,id:Math.floor(101*Math.random())};if(t.filter((function(e){return e.name===n.name})).length>0){if(window.confirm("".concat(n.name," is already in the phonebook, do you want to update the phone?"))){var o=t.find((function(e){return e.name===p}));v(o.id,Object(u.a)(Object(u.a)({},o),{},{phone:j})).then((function(e){r(t.map((function(n){return n.name===p?e:n})))})).catch((function(e){console.log(e),D({message:"Error during update",type:"error"})})),r(t.concat(n)),D({message:"the phone of ".concat(n.name," has changed"),type:"notification"}),d(""),w(""),setTimeout((function(){D(null)}),3e3)}}else b(n).then((function(e){r(t.concat(e).reverse()),D({message:"Added ".concat(n.name),type:"notification"}),d(""),w("")})).catch((function(e){D("".concat(e)),console.log(e)})),setTimeout((function(){D(null)}),3e3)},onPhonechangue:function(e){w(e.target.value),console.log(j)},onNameChangue:function(e){d(e.target.value),console.log(p)}}),a.a.createElement("h2",null,"List of persons with phones"),a.a.createElement(m,{persons:0===N.length?t:N,deletePerson:function(e,n){return function(){window.confirm("Do you want to delete ".concat(e," ?"))&&(y(n).then((function(){r(t.filter((function(e){return e.id!==n}))),D({message:"Deleted ".concat(e),type:"notification"})})).catch((function(o){console.log(o),r(t.filter((function(e){return e.id!==n}))),D({message:"The user ".concat(e," was deleted from the server already."),type:"error"})})),setTimeout((function(){D(null)}),3e3))}}}))};t(37);c.a.render(a.a.createElement(O,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.2ba7c154.chunk.js.map